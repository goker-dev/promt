<legend>Goals</legend>
<div class="table table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Project Goal</th>
                <th>Priorities</th>
                <th>Comment/Description</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="items">
            <tr class="info functional">
                <td>Functional Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info strategic">
                <td>Strategic Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info business">
                <td>Business Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info technological">
                <td>Technological Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info quality">
                <td>Quality Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info organizational">
                <td>Organizational Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info other">
                <td>Other Goals</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="info constraints">
                <td>Constraints</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>environmental</td>
                <td></td>
                <td></td>
                <td><a class="btn btn-default btn-sm">Remove</a></td>
            </tr>
        </tbody>
    </table>
</div>
{% if errors %}
<div class="alert alert-dismissable alert-danger">
    {{errors}}
</div>
{% endif %}
<form class="form-inline ajax" method="post" action="./goals/add">
    <fieldset>
        <div class="form-group">
            <select class="form-control" name="type">
                <option value="functional">Functional Goals</option>
                <option value="strategic">Strategic Goals</option>
                <option value="business">Business Goals</option>
                <option value="technological">Technological Goals</option>
                <option value="quality">Quality Goals</option>
                <option value="organizational">Organizational Goals</option>
                <option value="other">Other Goals</option>
                <option value="constraints">Constraints</option>
            </select>
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Project Goal" name="title">
        </div>
        <div class="form-group">
            <select class="form-control" name="priotry">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
            </select>
        </div>
        <div class="form-group">
            <input type="text" placeholder="Comment/Description" class="form-control" name="description">
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-default">Add goal</button>
        </div>
    </fieldset>
</form>
<script>
    function addItem(item){
        var html = '<tr id="'+item['_id']+'" class="'+item.type+'">'
                + '<td>'+item.title+'</td>'
                + '<td>'+item.priotry+'</td>'
                + '<td>'+item.description+'</td>'
                + '<td><a class="btn btn-default btn-sm" onclick="removeItem(\''+item['_id']+'\')">Remove</a></td>'
            + '</tr>';
        $('#items').find('.info.'+item.type).after(html);
    }
    function removeItem(id){
        $.ajax({
                url: '/dashboard/goals/delete',
                type: 'post',
                data: 'id='+id,
                dataType: 'json',
                success: function(item){
                   $('#'+item).remove();
                },
                error: function(err){
                    console.log(err);
                }
            });
    }
    function complete(response){ console.log(response.result); addItem(response.result); }
    window.onload = function(){
            $.ajax({
                url: '/dashboard/goals/get',
                type: 'get',
                data: null,
                dataType: 'json',
                success: function(items){
                    for(var i in items)
                        addItem(items[i]);
                },
                error: function(err){
                    console.log(err);
                }
            });
        }
</script>